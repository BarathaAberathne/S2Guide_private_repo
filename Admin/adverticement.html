<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Adverticements</title>

    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="/assets/dcode.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="short icon" href="/assets/favicon.ico">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <script src="https://kit.fontawesome.com/1a81673399.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Dashboard</title>

    <!-- Fontfaces CSS-->
    <link href="css/font-face.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-5/css/fontawesome-all.min.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="vendor/bootstrap-4.1/bootstrap.min.css" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="vendor/animsition/animsition.min.css" rel="stylesheet" media="all">
    <link href="vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet" media="all">
    <link href="vendor/wow/animate.css" rel="stylesheet" media="all">
    <link href="vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" media="all">
    <link href="vendor/slick/slick.css" rel="stylesheet" media="all">
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/theme.css" rel="stylesheet" media="all">
    <link href="css/style.css" rel="stylesheet">

    <script type="text/javascript">

        function readURL(input) {

            if (input.files && input.files[0]) {

                var reader = new FileReader();



                reader.onload = function (e) {

                    $('#preview')

                        .attr('src', e.target.result)

                        .width(150)

                        .height(200);

                };



                reader.readAsDataURL(input.files[0]);

            }

        }

    </script>

</head>
<body>
<div class="page-wrapper">
    <!-- HEADER MOBILE-->
    <header class="header-mobile d-block d-lg-none">
        <div class="header-mobile__bar">
            <div class="container-fluid">
                <div class="header-mobile-inner">
                    <a class="logo" href="index.html">
                        <img src="images/s2.jpeg" style="height: 78px" alt="S2Guide" />
                    </a>
                    <button class="hamburger hamburger--slider" type="button">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                    </button>
                </div>
            </div>
        </div>
        <nav class="navbar-mobile">
            <div class="container-fluid">
                <ul class="navbar-mobile__list list-unstyled">
                    <li class="has-sub">
                        <a class="js-arrow" href="index.html">
                            <i class="fas fa-tachometer-alt"></i>Home</a>

                    </li>
                    <li>
                        <a href="inquery_lists.html">
                            <i class="fas fa-address-book"></i>Manage Students</a>
                    </li>
                    <li>
                        <a href="Quiz.html">
                            <i class="fas fa-table"></i>Create Quiz</a>
                    </li>
                    <li>
                        <a href="DegreeManagement.html">
                            <i class="fas fa-graduation-cap"></i>Degree Management</a>
                    </li>
                    <li>
                        <a href="add_notice.html">
                            <i class="fas fa-calendar-alt"></i>Notices</a>
                    </li>
                    <li>
                        <a href="adverticement.html">
                            <i class="fas fa-bell"></i>Adverticements</a>
                    </li>

                </ul>

            </div>
        </nav>
    </header>
    <!-- END HEADER MOBILE-->

    <!-- MENU SIDEBAR-->
    <aside class="menu-sidebar d-none d-lg-block">
        <div class="logo">
            <a href="#">
                <img src="images/s2.jpeg" style="height: 78px" alt="S2Guide" />
            </a>

        </div>
        <div class="menu-sidebar__content js-scrollbar1">
            <nav class="navbar-sidebar">
                <ul class="list-unstyled navbar__list">
                    <li class="active has-sub">
                        <a class="js-arrow" href="Dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>Home</a>

                    </li>
                    <li>
                        <a href="inquery_lists.html">
                            <i class="fas fa-address-book"></i>Manage Students</a>
                    </li>
                    <li>
                        <a href="Quiz.html">
                            <i class="fas fa-table"></i>Create Quiz</a>
                    </li>
                    <li>
                        <a href="DegreeManagement.html">
                            <i class="fas fa-graduation-cap"></i>Degree Management</a>
                    </li>
                    <li>
                        <a href="add_notice.html">
                            <i class="fas fa-calendar-alt"></i>Notices</a>
                    </li>
                    <li>
                        <a href="adverticement.html">
                            <i class="fas fa-bell"></i>Advertisements</a>
                    </li>

                </ul>
            </nav>
        </div>
    </aside>


    <div class="page-container">

    <header class="header-desktop">
            <div class="section__content section__content--p30">
                <div class="container-fluid">
                    <div class="header-wrap">
                    <h2 style="text-align: center"> Advertisements</h2>
                    <div class="header-button">
                        <div class="account-wrap">
                            <div class="account-item clearfix js-item-menu">

                                <a href="#">
                                    <i class="zmdi zmdi-power"></i>Logout</a>
                                <div class="account-dropdown js-dropdown">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </header>
<br>
    <div class="main-content" style="background-image: url('images/admin2.png')">
        <div class="section__content section__content--p30">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-header"> <h1>Add Advertisements</h1></div>
                                <div class="row" style="padding-left: 0;padding-top: 0">
                <div class="col-md-6" style="border-color: white;" id="gallery">

                </div>

                <div class="col-md-6">
                    <div class="row" style="padding-left: 0;padding-top: 0">
                        <div class="col-md-12">

                            <img src="images/no_image_png.png" class="d-block w-100" alt="..." id="preview" style="min-height:400px;min-width:100%;max-height: 400px;max-width: 100%">
                        </div>

                    </div>
                </div>


                    <div class="row" style="padding-left: 0;padding-top: 0">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12">
                                    <input type="file" name="fileToUpload" id="realBtn" onchange="readURL(this);" accept="image/gif, image/jpeg, image/png" hidden>
                                    <button class="btn btn-primary" id="custom-btn">Choose File</button>
                                    <span id="custom-text">No files chosen, yet</span>
                                </div>
                            </div>
                            <div class="row" id="upload" style="margin-top: 10px">
                                <div class="col-md-8">
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated text-white" role="progressbar" id="upload-progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">0%</div>
                                    </div>

                                </div>
                                <div class="col-md-4">
                                    <!--<button class="btn btn-success btn-block" id="custom-upload-btn" onclick="return confirm('Are you sure to upload?')">Upload</button>-->
                                    <button class="btn btn-success btn-block" id="custom-upload-btn" style="width: 100px;">Upload</button>

                                </div>
                            </div>
                        </div>
                    </div>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyDPkSmKr-2T6C0_1SFwjWeRFlCzzL5VXc0",
        authDomain: "s2guide.firebaseapp.com",
        databaseURL: "https://s2guide.firebaseio.com",
        projectId: "s2guide",
        storageBucket: "s2guide.appspot.com",
        messagingSenderId: "457852779269",
        appId: "1:457852779269:web:7e27f12f4d807544"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
</script>

<script type="text/javascript">
    const realFileBtn = document.getElementById("realBtn");
    const customBtn = document.getElementById("custom-btn");
    const customTxt = document.getElementById("custom-text");
    const uploadBtn = document.getElementById("custom-upload-btn");
    const upload = document.getElementById("upload");
    const caption = document.getElementById("image-caption");
    const gallery = document.getElementById("gallery");
    const progressBar = document.getElementById("upload-progress");

    let selectedFile;
    let dbRef = firebase.database().ref("Advertisements/");

    (function() {
        upload.hidden = true;
        dbRef.on("child_added", function (snapshot) {
            let url = snapshot.val();
            gallery.innerHTML += `<a href="${url}"><img src="${url}" alt="..."></a>`;
        });
    })();

    customBtn.addEventListener("click", function(){
        realFileBtn.click();
    });

    realFileBtn.addEventListener("change", function (e) {
        if(realFileBtn.value){
            customTxt.innerHTML = realFileBtn.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1];
            upload.hidden = false;
            selectedFile = e.target.files[0];
        }
    });

    uploadBtn.addEventListener("click", function () {
        var txt;
        if (confirm("Press a button!")) {
            uploadImage();
        } else {
            return false;
        }

    });

    function largeURL(snapshot){
        let url = snapshot.downloadURL;

        let updates = {};
        let postData = {
            url:url,
            caption:caption.value
        };
        updates['/Advertisements/' + postKey] = postData;
        firebase.database().ref().update(updates);

        function renderImage(snap){
            let url = snap.val();
        }
        firebase.database().ref("Advertisements/").on("child_added", renderImage);
    }


    function uploadImage() {

        let filename = selectedFile.name;
        let storageRef = firebase.storage().ref('/advertisements/' + filename);
        let uploadTask = storageRef.put(selectedFile);

        // Register three observers:
        // 1. 'state_changed' observer, called any time the state changes
        // 2. Error observer, called on failure
        // 3. Completion observer, called on successful completion
        uploadTask.on('state_changed', function(snapshot){
            // Observe state change events such as progress, pause, and resume
            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded
            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
            console.log('Upload is ' + progress + '% done');
            progressBar.style.width = progress + "%";
            progressBar.innerHTML = Math.round(progress) + "%";
            switch (snapshot.state) {
                case firebase.storage.TaskState.PAUSED: // or 'paused'
                    console.log('Upload is paused');
                    break;
                case firebase.storage.TaskState.RUNNING: // or 'running'
                    console.log('Upload is running');
                    break;
            }
        }, function(error) {
            // Handle unsuccessful uploads
        }, function() {
            // Handle successful uploads on complete
            // For instance, get the download URL: https://firebasestorage.googleapis.com/...

            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                console.log('File available at', downloadURL);
                dbRef.push(downloadURL);

            });




        });

    }

</script>
</div>
        </div>
        </div>
    </div>
</div>
            </div>
        </div>
        </div>
    </div>
</div>
</body>
</html>